@echo off
# Отключает вывод команд на экран (только результаты)

# Поиск процесса, использующего порт 3001
# netstat -ano — список всех подключений
# findstr :3001 — фильтр по порту 3001
# findstr LISTENING — только процессы в состоянии прослушивания
# tokens=5 — пятое поле это PID процесса
for /f "tokens=5" %%a in ('netstat -ano ^| findstr :3001 ^| findstr LISTENING') do (
    # Вывод сообщения о PID который будет остановлен
    echo Killing PID %%a
    # Принудительное завершение процесса
    taskkill /f /pid %%a
)

# Сообщение о завершении работы скрипта
echo Done.